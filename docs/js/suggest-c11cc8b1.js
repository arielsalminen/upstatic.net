String.prototype.score=function(t){if(0===t.length)return.9;if(t.length>this.length)return 0;for(var e=t.length;e>0;e--){var i=t.substring(0,e),s=this.indexOf(i);if(!(0>s||s+t.length>this.length)){var l=this.substring(s+i.length),n=null;n=e>=t.length?"":t.substring(e);var o=l.score(n,s);if(o>0){var r=this.length-l.length;if(0!==s){var a=0,c=this.charCodeAt(s-1);if(32===c||9===c)for(a=s-2;a>=0;a--)c=this.charCodeAt(a),r-=32===c||9===c?1:.15;else r-=s}return r+=o*l.length,r/=this.length}}}return 0},function(t,e){"use strict";function i(t,i,s,l){this.field=e.querySelector(t)||e.getElementById("search"),this.list=e.querySelector(i)||e.getElementById("suggestions"),this.loader=e.querySelector(s)||e.querySelector(".loading"),this.links=this.list.getElementsByTagName("a"),this.breakpoint=l||660,this.placeholderText="Type a keyword (eg. \u201ccaching\u201d)",this.placeholderTextMobile="Type a keyword",this.activeClass="active",this.visibleClass="visible",this.focusClass="focus",this.ticking=!1}function s(t,e,s,l){var n=new i(t,e,s,l);return n.init(),n}i.prototype={constructor:i,init:function(){var e=this;util.isSupported&&this.list&&"null"!==this.list&&(util.addListener(t,"blur",this,!1),util.addListener(t,"resize",this,!1),util.addListener(t,"keydown",this,!1),util.addListener(t,"orientationchange",this,!1),util.addListener(this.field,"focus",function(){e.field.classList.add(e.focusClass)},!1),util.forEach(this.links,function(t){e.links[t].setAttribute("tabindex","-1")}),this.resize(),this.setupCache(),this.placeholderPolyfill(),this.toggleResults(),this.handleInputEvents(),this.handleMouseEvents())},removeFocus:function(){var t=this;if(this.field!==e.activeElement){var i=e.querySelectorAll("."+this.focusClass);i[0]&&util.forEach(i,function(e){i[e].classList.remove(t.focusClass)})}},handleEvent:function(e){var i=e||t.event;switch(i.type){case"click":this.clickOutside(i);break;case"keydown":this.removeFocus(i);break;case"keyup":this.toggleResultsOnKeyup(i);break;case"orientationchange":case"resize":this.resize(i);break;case"focus":this.scrollIntoView(this.field);break;case"blur":this.blur(i)}},resize:function(){t.innerWidth<this.breakpoint?(util.addListener(this.field,"focus",this,!1),this.field.setAttribute("placeholder",this.placeholderTextMobile)):(util.removeListener(this.field,"focus",this,!1),this.field.setAttribute("placeholder",this.placeholderText))},findPosition:function(t){var e=0;if(t.offsetParent){do e+=t.offsetTop;while(t=t.offsetParent);return e}},getCurrentPosition:function(){return t.pageYOffset?t.pageYOffset:0},scrollIntoView:function(t){var e=this.getCurrentPosition(),i=this.findPosition(t)-30,s=i>e?i-e:e-i,l=Math.round(s/50);l>=20&&(l=20);var n,o=Math.round(s/25),r=i>e?e+o:e-o,a=0;if(i>e)for(n=e;i>n;n+=o)setTimeout("window.scrollTo(0, "+r+")",a*l),r+=o,r>i&&(r=i),a++;else for(n=e;n>i;n-=o)setTimeout("window.scrollTo(0, "+r+")",a*l),r-=o,i>r&&(r=i),a++},placeholderPolyfill:function(){var t=this;util.supportsPlaceholder||(this.field.value=this.placeholderText,util.addListener(this.field,"focus",function(){this.value===t.placeholderText&&(this.value="")},!1),util.addListener(this.field,"blur",function(){""===this.value&&(this.value=t.placeholderText)},!1))},placeholderFill:function(){this.field.value=util.supportsPlaceholder?"":this.placeholderText},clickOutside:function(t){for(var e=0,i=t.target;i;i=i.parentNode){if(i.id===this.list.id||i.id===this.field.id)return;e++}this.blur(),this.removeFocus()},toggleResultsOnKeyup:function(i){return 27===i.keyCode?(i.preventDefault(),this.blur(),void this.removeFocus()):(history.pushState&&history.pushState("",e.title,t.location.pathname),void(""!==this.field.value&&(""!==this.value?"none"===t.getComputedStyle(this.list,null).getPropertyValue("display")&&(this.list.style.display="block",this.list.scrollTop=0):this.list.style.display="none")))},toggleResults:function(){var i=this;util.addListener(e,"click",this,!1),util.addListener(this.field,"keyup",this,!1),util.addListener(this.field,"keydown",function(e){var s=e||t.event;return 32===s.keyCode||13===s.keyCode?void e.preventDefault():9===e.keyCode?(i.list.style.display="none",void i.removeFocus()):void 0},!1)},handleSubmit:function(i,s){var l=this;i.preventDefault(),this.stopGettingScores(),s?(s.classList.add("submit"),setTimeout(function(){var i=s.querySelector("a").getAttribute("href"),n=i.replace("#",""),o=e.getElementById(n);t.scrollTo(0,l.findPosition(o)-40),l.field.classList.remove(l.focusClass),o.classList.add(l.focusClass),l.blur()},150)):setTimeout(function(){l.loader.classList.remove(l.activeClass)},150)},browseResults:function(t,e,i){var s;if(t){for(s=e?t.nextElementSibling:t.previousElementSibling;s&&!s.classList.contains(this.visibleClass);)s=e?s.nextElementSibling:s.previousElementSibling;if(s&&s.classList.contains(this.visibleClass)){t.classList.remove(this.activeClass),s.classList.add(this.activeClass),t=s;var l=0;i||(l=t.offsetTop||0),e?i?this.list.scrollTop=l-50:l>180&&(this.list.scrollTop=l-50):this.list.scrollTop=l-50}}},handleInputEvents:function(){var e=this;util.addListener(this.field,"blur",function(){e.stopGettingScores()}),util.addListener(this.field,"keyup",function(i){e.ticking=!1;var s=i||t.event;if(16===s.keyCode||18===s.keyCode||37===s.keyCode||39===s.keyCode)return void i.preventDefault();var l=e.list.querySelector("li."+e.activeClass);if(13===s.keyCode&&e.handleSubmit(i,l),40!==s.keyCode&&38!==s.keyCode)e.filter();else if(i.preventDefault(),e.stopGettingScores(),l)40===s.keyCode?e.browseResults(l,!0):e.browseResults(l,!1);else if(40===s.keyCode){var n=e.list.querySelectorAll("li."+e.visibleClass);util.addClassToFirstOfType(n,e.activeClass),e.browseResults(e.list.querySelector("li."+e.activeClass),!0,!0)}})},handleMouseEvents:function(){var t=this.list.querySelector("li."+this.activeClass),e=this;util.forEach(this.links,function(i){util.addListener(e.links[i],"mouseover",function(){e.stopGettingScores(),t.classList.remove(e.activeClass),e.links[i].parentNode.classList.add(e.activeClass),t=e.links[i].parentNode},!1),util.addListener(e.links[i],"mouseout",function(){e.links[i].parentNode.classList.remove(e.activeClass),e.ticking=!1},!1),util.addListener(e.links[i],"click",function(t){e.handleSubmit(t,e.links[i].parentNode)},!1)})},filter:function(){var i=this;return""===this.field.value?void util.forEach(this.list.children,function(t){i.list.children[t].style.display="block"}):(this.field===e.activeElement&&this.loader.classList.add(this.activeClass),void(this.ticking||(this.stopGettingScores(),i.timer=t.setInterval(function(){i.displayLate()},200))))},displayLate:function(){this.displayResults(this.getScores(this.field.value.toLowerCase())),this.loader.classList.remove(this.activeClass),this.ticking=!1},setupCache:function(){var t=this;this.cache=[],this.rows=[],util.forEach(this.list.children,function(e){t.cache.push(t.list.children[e].innerHTML.toLowerCase()),t.rows.push(t.list.children[e])}),this.cacheLength=this.cache.length},displayResults:function(t){var e=this;util.forEach(this.list.children,function(t){e.list.children[t].style.display="none",e.list.children[t].className=""}),util.forEach(t,function(t,i){e.rows[i[1]].style.display="block",e.rows[i[1]].classList.add(e.visibleClass)});var i=this.list.querySelectorAll("li."+this.visibleClass);util.addClassToFirstOfType(i,this.activeClass)},getScores:function(t){for(var e=[],i=0;i<this.cacheLength;i++){var s=this.cache[i].score(t);s>0&&e.push([s,i])}return this.stopGettingScores(),e.sort(function(t,e){return e[0]-t[0]})},stopGettingScores:function(){clearInterval(this.timer),this.ticking=!0},blur:function(){this.list.style.display="none",this.field.blur(),this.placeholderFill(),this.loader.classList.remove(this.activeClass)}},t.autoSuggest=s}(window,document),autoSuggest();